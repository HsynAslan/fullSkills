<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Filtreleme</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
  </head>
  <body>
    <%- include('../partials/teacherNavbar') %>
    <div id="filter-container" class="mt-5">
      <h1>Filtreleme Sayfası - <%= selectedSkill %></h1>
      <form action="/filter" method="get">
        <div id="filter-form-group" class="form-group">
          <label for="skill">Beceri:</label>
          <select id="skill" name="skill" class="form-control">
            <option value="">Tüm Beceriler</option>
            <% skills.forEach(function(skill) { %>
            <option value="<%= skill.skill %>" <%= selectedSkill === skill.skill ? 'selected' : '' %>><%= skill.skill %></option>
            <% }) %>
          </select>
        </div>
        <button type="submit" id="filter-btn-primary" class="btn btn-primary">
          Filtrele
        </button>
      </form>

      <div id="filter-results" class="mt-5">
        <% if (results.length === 0) { %>
        <p>Sonuç bulunamadı.</p>
        <% } else { %>
        <ul id="filter-results-list">
          <% results.forEach(function(result) { %>
          <li class="filter-result-item">
            <div class="result-info">
              <h5 class="result-title">
                <%= result.name %> <%= result.surname %> (@<%= result.username %>)
              </h5>
              <p class="result-detail">
                <strong>Beceri:</strong> <%= result.skill %><br />
                <strong>Etkinlik Sayısı:</strong> <%= result.skill_count %>
              </p>
            </div>
            <div class="result-bar">
              <div class="bar" style="width: <%= result.skill_count * 10 %>%;"></div>
            </div>
          </li>
          <% }) %>
        </ul>
        <% } %>
      </div>
    </div>
  </body>
</html>
